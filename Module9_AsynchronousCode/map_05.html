<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Marker Tracking</title>
        <script src="https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.js"></script>
        <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.css">

        <style>
            body {
                margin: 0;
                padding: 0;
            }

            #map {
                position: absolute;
                top: 0;
                bottom: 0;
                width: 100%;
            }

            .map-overlay {
                position: absolute;
                left: 0;
                padding: 10px;
            }
        </style>
    </head>

    <body>
        <div id="map"></div>
        <div class="map-overlay top">
            <button style="font-size: 2em;" onclick="move()">
                Show Stops Between MIT and Harvard
            </button>
        </div>

        <script>
            mapboxgl.accessToken = 'pk.eyJ1IjoiY2FzdGl5ZWF1eCIsImEiOiJja2V3cnR6cnUwNm8wMnN0YTJ3bm9rZjh3In0.t86TvIkBhgIUtA6d--wOUg';

            var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/streets-v11',
                center: [-71.104081, 42.365554],
                zoom: 14
            });

            var marker = new mapboxgl.Marker().setLngLat([-71.092761, 42.357575]).addTo(map);

            const busStops = [
            [-71.093729, 42.359244],
            [-71.094915, 42.360175],
            [-71.095800, 42.360698],
            [-71.099558, 42.362953],
            [-71.103476, 42.365248],
            [-71.106067, 42.366806],
            [-71.108717, 42.368355],
            [-71.110799, 42.369192],
            [-71.113095, 42.370218],
            [-71.115476, 42.372085],
            [-71.117585, 42.373016],
            [-71.118625, 42.374863]
            ];

            var counter = 0;
            function move() {
                setTimeout(() => {
                    if(counter >= busStops.length) {
                        return;
                    }
                    marker.setLngLat(busStops[counter]);
                    counter++;
                    move();
                }, 1000);
            }
        </script>
    </body>
</html>
